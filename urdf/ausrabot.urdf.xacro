<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="ausrabot">
  <link name="robot_footprint" />
  <joint name="dummy_joint" type="fixed">
      <parent link="robot_footprint"/>
      <child link="base_link"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>
  <link
    name="base_link">
    <inertial>
      <origin
        xyz="0.000132358596962433 0.0107784527153615 0.0455578201137751"
        rpy="0 0 0" />
      <mass
        value="0.545316432015797" />
      <inertia
        ixx="0.00232840648283892"
        ixy="7.82952052633134E-08"
        ixz="-2.35921291442106E-08"
        iyy="0.00246732309842302"
        iyz="-2.45394203695068E-06"
        izz="0.00451259615315152" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="wheel_1">
    <inertial>
      <origin
        xyz="-6.11585138939009E-07 2.40519083084118E-06 0.00687917878282576"
        rpy="0 0 0" />
      <mass
        value="0.037694823031467" />
      <inertia
        ixx="3.0972076096957E-06"
        ixy="2.84246335131892E-11"
        ixz="-2.16478688549662E-10"
        iyy="3.09696234654175E-06"
        iyz="8.51072894756962E-10"
        izz="5.34864718246412E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/wheel_1.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.0 0.0 1.0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
          <cylinder radius="0.034" length="0.015"/>
      </geometry>
      <surface> 
        <friction>
          <ode>
            <mu>1.0</mu>
            <mu2>1.0</mu2>
          </ode>
        </friction>
      </surface>  
    </collision>
  </link>
  <joint
    name="joint_1"
    type="continuous">
    <origin
      xyz="0.00131071109492098 0.110453635935089 -0.0161803398874989"
      rpy="1.5707963267949 0 3.12946941504743" />
    <parent
      link="base_link" />
    <child
      link="wheel_1" />
    <axis
      xyz="0 0 1" />
  </joint>
  <link
    name="wheel_2">
    <inertial>
      <origin
        xyz="-2.22775634618061E-06 -1.09358984268573E-06 0.006879178822061"
        rpy="0 0 0" />
      <mass
        value="0.0376948232954181" />
      <inertia
        ixx="3.09702282374251E-06"
        ixy="-3.32677650778434E-11"
        ixz="-7.88279016321689E-10"
        iyy="3.09712667239217E-06"
        iyz="-3.87033927352786E-10"
        izz="5.34862673117426E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/wheel_2.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.0 0.0 1.0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
          <cylinder radius="0.034" length="0.015"/>
      </geometry>
      <surface> 
        <friction>
          <ode>
            <mu>1.0</mu>
            <mu2>1.0</mu2>
          </ode>
        </friction>
      </surface>  
    </collision>
  </link>
  <joint
    name="joint_2"
    type="continuous">
    <origin
      xyz="-0.0963609169452294 -0.0540793874249231 -0.016180339887499"
      rpy="1.5707963267949 0 -1.05932078973896" />
    <parent
      link="base_link" />
    <child
      link="wheel_2" />
    <axis
      xyz="0 0 1" />
  </joint>
  <link
    name="wheel_3">
    <inertial>
      <origin
        xyz="2.39002105834052E-06 6.6831361357142E-07 0.00687917877739805"
        rpy="0 0 0" />
      <mass
        value="0.0376948233023577" />
      <inertia
        ixx="3.09710830531407E-06"
        ixy="8.8846112421192E-12"
        ixz="8.45711274919436E-10"
        iyy="3.0971477806935E-06"
        iyz="2.36549362165485E-10"
        izz="5.34873332719162E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/wheel_3.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.0 0.0 1.0 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
          <cylinder radius="0.034" length="0.015"/>
      </geometry>
      <surface> 
        <friction>
          <ode>
            <mu>1.0</mu>
            <mu2>1.0</mu2>
          </ode>
        </friction>
      </surface>  
    </collision>
  </link>
    <joint
    name="joint_3"
    type="continuous">
    <origin
      xyz="0.0949646750660746 -0.0563989868566714 -0.016180339887499"
      rpy="1.5707963267949 0 1.03507431265423" />
    <parent
      link="base_link" />
    <child
      link="wheel_3" />
    <axis
      xyz="0 0 1" />
  </joint>
  <link
    name="lidar">
    <inertial>
      <origin
        xyz="-0.000173277491394453 -0.00676662791697095 0.00557928889827741"
        rpy="0 0 0" />
      <mass
        value="0.171177012505295" />
      <inertia
        ixx="0.000124253941113825"
        ixy="-4.38664000869312E-07"
        ixz="-6.40588163757229E-07"
        iyy="7.95393375273759E-05"
        iyz="-2.02744127539845E-05"
        izz="0.000141905084169328" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/lidar.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.250980392156863 0.250980392156863 0.250980392156863 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/lidar.STL" />
      </geometry>
    </collision>
    <!--
    <sensor name="lidar_sensor" type="gpu_lidar">
      <pose>0 0 0 0 0 0</pose>
      <update_rate>10</update_rate>
      <topic>/scan</topic>
      <lidar>
        <scan>
          <horizontal>
            <samples>360</samples>
            <resolution>1</resolution>
            <min_angle>-3.14159</min_angle>
            <max_angle>3.14159</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.15</min>
          <max>12.0</max>
        </range>
      </lidar>
      <visualize>false</visualize>
    </sensor>
    -->
  </link>
  <joint
    name="lidar_joint"
    type="fixed">
    <origin
      xyz="-2.85102614102555E-05 0 0.110598095199185"
      rpy="0 0 3.14159265358979" />
    <parent
      link="base_link" />
    <child
      link="lidar" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="oak_camera">
    <inertial>
      <origin
        xyz="2.77555756156289E-17 2.38524477946811E-18 -0.00860000000000001"
        rpy="0 0 0" />
      <mass
        value="0.0417182941210436" />
      <inertia
        ixx="2.88248605870479E-05"
        ixy="-7.46277402243113E-19"
        ixz="3.67148828118008E-22"
        iyy="3.55432167309084E-06"
        iyz="2.8124140826834E-22"
        izz="3.03221922380105E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/oak_camera.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.250980392156863 0.250980392156863 0.250980392156863 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://ausrabot_description/meshes/oak_camera.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="oak_joint"
    type="fixed">
    <origin
      xyz="0.000808669644363073 0.103689225067774 0.098888095199185"
      rpy="1.55867308825253 -1.5707963267949 0" />
    <parent
      link="base_link" />
    <child
      link="oak_camera" />
    <axis
      xyz="0 0 0" />
  </joint>

  <ros2_control name="GazeboSystem" type="system">
    <hardware>
      <plugin>gz_ros2_control/GazeboSimSystem</plugin>
    </hardware>
    <joint name="joint_1">
      <command_interface name="velocity"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>
    <joint name="joint_2">
      <command_interface name="velocity"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>
    <joint name="joint_3">
      <command_interface name="velocity"/>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>
  </ros2_control>

  <gazebo>
    <plugin
      filename="gz-sim-sensors-system"
      name="gz::sim::systems::Sensors">
      <render_engine>ogre2</render_engine>
    </plugin>

    <plugin filename="gz_ros2_control-system" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
      <parameters>$(find ausrabot_description)/config/ausrabot_controller.yaml</parameters>
      <robot_param>robot_description</robot_param>
      <robot_param_node>robot_state_publisher</robot_param_node>
    </plugin>
  </gazebo>
  
</robot>